<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ù–∞–π–¥–∏ –ø–∞—Ä—É üçì</title>
<style>
  body { font-family: Arial; text-align:center; background:#fdf6e3; margin:0; padding:0; }
  button { padding:10px 20px; margin:10px; font-size:18px; cursor:pointer; border:none; border-radius:10px; background:#f4a261; color:white; }
  .hidden { display:none; }
  #menu,#game { padding:20px; }
  #grid { display:grid; grid-template-columns: repeat(4,80px); grid-gap:10px; justify-content:center; margin:20px auto; }
  .cell { width:80px; height:80px; background:#e9c46a; border-radius:10px; display:flex; justify-content:center; align-items:center; font-size:36px; cursor:pointer; user-select:none; }
  #score { font-size:20px; margin-top:10px; }
</style>
</head>
<body>

<div id="menu">
  <h1>–ù–∞–π–¥–∏ –ø–∞—Ä—É üçì</h1>
  <button id="playBtn">–ò–≥—Ä–∞—Ç—å</button>
  <button id="supportBtn">–¢–µ—Ö.–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
</div>

<div id="game" class="hidden">
  <h2>–°–æ–≤–ø–∞–¥–∞–π —Ñ—Ä—É–∫—Ç—ã!</h2>
  <div id="score">–ú–æ–Ω–µ—Ç–∫–∏: 0</div>
  <div id="grid"></div>
  <button id="backBtn">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<script>
const menu=document.getElementById('menu');
const game=document.getElementById('game');
const playBtn=document.getElementById('playBtn');
const supportBtn=document.getElementById('supportBtn');
const backBtn=document.getElementById('backBtn');
const grid=document.getElementById('grid');
const scoreDisplay=document.getElementById('score');

const fruits = [
  {emoji:'üçâ', value:5},{emoji:'üçé', value:3},{emoji:'üçì', value:4},{emoji:'üçá', value:2},
  {emoji:'üçê', value:3},{emoji:'üçë', value:4},{emoji:'üå¥', value:5},{emoji:'ü•ú', value:2}
];

let score = 0;
let firstCell = null;
let secondCell = null;
let lock = false;

playBtn.addEventListener('click',()=>{
  menu.classList.add('hidden');
  game.classList.remove('hidden');
  startGame();
});

supportBtn.addEventListener('click',()=>window.open('https://t.me/KosmosHardoxxx','_blank'));

backBtn.addEventListener('click',()=>{
  game.classList.add('hidden');
  menu.classList.remove('hidden');
  grid.innerHTML='';
  score=0;
  scoreDisplay.textContent=`–ú–æ–Ω–µ—Ç–∫–∏: ${score}`;
});

function startGame(){
  score=0;
  scoreDisplay.textContent=`–ú–æ–Ω–µ—Ç–∫–∏: ${score}`;
  createGrid();
}

function createGrid(){
  grid.innerHTML='';
  let pairFruits = [...fruits, ...fruits]; // 16 —è—á–µ–µ–∫
  pairFruits.sort(()=>0.5-Math.random());
  for(let i=0;i<pairFruits.length;i++){
    const cell=document.createElement('div');
    cell.classList.add('cell');
    cell.dataset.emoji=pairFruits[i].emoji;
    cell.dataset.value=pairFruits[i].value;
    cell.textContent='';
    cell.addEventListener('click',()=>flipCell(cell));
    grid.appendChild(cell);
  }
}

function flipCell(cell){
  if(lock || cell===firstCell || cell.textContent!=='' && cell.textContent!==cell.dataset.emoji) return;
  cell.textContent=cell.dataset.emoji;
  if(!firstCell){
    firstCell=cell;
  } else {
    secondCell=cell;
    lock=true;
    setTimeout(checkMatch,500);
  }
}

function checkMatch(){
  if(firstCell.dataset.emoji===secondCell.dataset.emoji){
    score += parseInt(firstCell.dataset.value);
    scoreDisplay.textContent=`–ú–æ–Ω–µ—Ç–∫–∏: ${score}`;
    firstCell.style.background='#2a9d8f';
    secondCell.style.background='#2a9d8f';
  } else {
    firstCell.textContent='';
    secondCell.textContent='';
  }
  firstCell=null;
  secondCell=null;
  lock=false;
}
</script>

</body>
</html>
